{"ast":null,"code":"import actiontypes from '../actiontypes';\nconst initState = {\n  shoppingCart: [],\n  totalCartQunatity: 0,\n  totalCartMaount: 0\n};\n\nconst cartReducer = (state = initState, action) => {\n  let itemIndex;\n\n  switch (action.type) {\n    case actiontypes().cart.add:\n      try {\n        itemIndex = state.shoppingCart.findIndex(product => product._id === action.payload._id);\n        let _product = { ...action.payload,\n          quantity: 1\n        };\n        console.log(itemIndex);\n        itemIndex < 0 ? state.shoppingCart = [...state.shoppingCart, _product] : state.shoppingCart[itemIndex].quantity += 1;\n        state.totalCartMaount = getTotalAmount(state.shoppingCart);\n        state.totalCartQunatity = getTotalQuantity(state.shoppingCart);\n      } catch (err) {\n        console.log(err);\n      }\n\n      return state;\n\n    case actiontypes().cart - remove:\n      try {\n        itemIndex = state.shoppingCart.findIndex(product => product._id === action.payload);\n        state.shoppingCart[itemIndex].quantity === 1 ? state.shoppingCart = state.shoppingCart.filter(product => product._id !== action.pa) : state.shoppingCart[itemIndex].quantity -= 1;\n      } catch (err) {\n        console.log(err);\n      }\n\n    default:\n      return state;\n  }\n};\n\nconst getTotalQuantity = cart => {\n  let total = 0;\n  cart.forEach(product => {\n    total += product.quantity;\n  });\n  return total;\n};\n\nconst getTotalAmount = cart => {\n  let total = 0;\n  cart.forEach(product => {\n    total += product.price * product.quantity;\n  });\n  return total;\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["C:/Users/sarab/Desktop/React uppgift/ReactApi/e-co/src/store/reducers/cartReducer.js"],"names":["actiontypes","initState","shoppingCart","totalCartQunatity","totalCartMaount","cartReducer","state","action","itemIndex","type","cart","add","findIndex","product","_id","payload","_product","quantity","console","log","getTotalAmount","getTotalQuantity","err","remove","filter","pa","total","forEach","price"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,gBAAxB;AAEA,MAAMC,SAAS,GAAG;AACdC,EAAAA,YAAY,EAAE,EADA;AAEdC,EAAAA,iBAAiB,EAAE,CAFL;AAGdC,EAAAA,eAAe,EAAE;AAHH,CAAlB;;AAMA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGL,SAAT,EAAoBM,MAApB,KAA+B;AAChD,MAAIC,SAAJ;;AAEC,UAAOD,MAAM,CAACE,IAAd;AACE,SAAKT,WAAW,GAAGU,IAAd,CAAmBC,GAAxB;AACE,UAAI;AACAH,QAAAA,SAAS,GAAGF,KAAK,CAACJ,YAAN,CAAmBU,SAAnB,CAA6BC,OAAO,IAAIA,OAAO,CAACC,GAAR,KAAgBP,MAAM,CAACQ,OAAP,CAAeD,GAAvE,CAAZ;AACA,YAAIE,QAAQ,GAAG,EACX,GAAGT,MAAM,CAACQ,OADC;AAEXE,UAAAA,QAAQ,EAAE;AAFC,SAAf;AAIAC,QAAAA,OAAO,CAACC,GAAR,CAAYX,SAAZ;AACCA,QAAAA,SAAS,GAAG,CAAZ,GACEF,KAAK,CAACJ,YAAN,GAAqB,CAAC,GAAGI,KAAK,CAACJ,YAAV,EAAwBc,QAAxB,CADvB,GAEEV,KAAK,CAACJ,YAAN,CAAmBM,SAAnB,EAA8BS,QAA9B,IAA0C,CAF5C;AAIAX,QAAAA,KAAK,CAACF,eAAN,GAAwBgB,cAAc,CAACd,KAAK,CAACJ,YAAP,CAAtC;AACAI,QAAAA,KAAK,CAACH,iBAAN,GAAyBkB,gBAAgB,CAACf,KAAK,CAACJ,YAAP,CAAzC;AAGF,OAfH,CAgBI,OAAMoB,GAAN,EAAW;AAACJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AAAiB;;AACzB,aAAOhB,KAAP;;AAER,SAAKN,WAAW,GAAGU,IAAd,GAAmBa,MAAxB;AACA,UAAI;AACAf,QAAAA,SAAS,GAAGF,KAAK,CAACJ,YAAN,CAAmBU,SAAnB,CAA6BC,OAAO,IAAIA,OAAO,CAACC,GAAR,KAAgBP,MAAM,CAACQ,OAA/D,CAAZ;AAEAT,QAAAA,KAAK,CAACJ,YAAN,CAAmBM,SAAnB,EAA8BS,QAA9B,KAA2C,CAA3C,GACEX,KAAK,CAACJ,YAAN,GAAqBI,KAAK,CAACJ,YAAN,CAAmBsB,MAAnB,CAA0BX,OAAO,IAAIA,OAAO,CAACC,GAAR,KAAgBP,MAAM,CAACkB,EAA5D,CADvB,GAECnB,KAAK,CAACJ,YAAN,CAAmBM,SAAnB,EAA8BS,QAA9B,IAA0C,CAF3C;AAIH,OAPD,CAQA,OAAOK,GAAP,EAAY;AAAEJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AAEb;;AAED;AACA,aAAOhB,KAAP;AAnCJ;AAqCH,CAxCD;;AA0CA,MAAMe,gBAAgB,GAAGX,IAAI,IAAI;AACzB,MAAIgB,KAAK,GAAG,CAAZ;AAEAhB,EAAAA,IAAI,CAACiB,OAAL,CAAad,OAAO,IAAI;AACpBa,IAAAA,KAAK,IAAIb,OAAO,CAACI,QAAjB;AACH,GAFD;AAGA,SAAOS,KAAP;AACP,CAPD;;AASA,MAAMN,cAAc,GAAGV,IAAI,IAAI;AAC3B,MAAIgB,KAAK,GAAE,CAAX;AAEAhB,EAAAA,IAAI,CAACiB,OAAL,CAAad,OAAO,IAAI;AACpBa,IAAAA,KAAK,IAAIb,OAAO,CAACe,KAAR,GAAgBf,OAAO,CAACI,QAAjC;AAEH,GAHD;AAIA,SAAOS,KAAP;AACH,CARD;;AAUA,eAAerB,WAAf","sourcesContent":["import actiontypes from '../actiontypes';\r\n\r\nconst initState = {\r\n    shoppingCart: [],\r\n    totalCartQunatity: 0,\r\n    totalCartMaount: 0\r\n}\r\n\r\nconst cartReducer = (state = initState, action) => {\r\n   let itemIndex;\r\n   \r\n    switch(action.type) {\r\n      case actiontypes().cart.add:\r\n        try {\r\n            itemIndex = state.shoppingCart.findIndex(product => product._id === action.payload._id)\r\n            let _product = {\r\n                ...action.payload,\r\n                quantity: 1\r\n            }\r\n            console.log(itemIndex);\r\n             itemIndex < 0\r\n             ? state.shoppingCart = [...state.shoppingCart, _product]\r\n             : state.shoppingCart[itemIndex].quantity += 1\r\n\r\n             state.totalCartMaount = getTotalAmount(state.shoppingCart);\r\n             state.totalCartQunatity =getTotalQuantity(state.shoppingCart);\r\n           \r\n           \r\n          }\r\n            catch(err) {console.log(err)}\r\n                return state\r\n     \r\n        case actiontypes().cart-remove: \r\n        try {\r\n            itemIndex = state.shoppingCart.findIndex(product => product._id === action.payload)\r\n              \r\n            state.shoppingCart[itemIndex].quantity === 1\r\n            ? state.shoppingCart = state.shoppingCart.filter(product => product._id !== action.pa)\r\n            :state.shoppingCart[itemIndex].quantity -= 1    \r\n        \r\n        } \r\n        catch (err) { console.log(err)\r\n            \r\n        }\r\n\r\n        default: \r\n        return state\r\n    }\r\n}   \r\n   \r\nconst getTotalQuantity = cart => {\r\n        let total = 0;\r\n\r\n        cart.forEach(product => {\r\n            total += product.quantity\r\n        })\r\n        return total;\r\n}\r\n\r\nconst getTotalAmount = cart => {\r\n    let total =0;\r\n\r\n    cart.forEach(product => {\r\n        total += product.price * product.quantity\r\n\r\n    })\r\n    return total;\r\n}\r\n\r\nexport default cartReducer;"]},"metadata":{},"sourceType":"module"}